# 풋볼패드 개발 가이드 - Cursor IDE

## 프로젝트 개요
풋볼패드는 동호회 축구팀을 위한 종합 관리 플랫폼입니다. Next.js 15 + React 19 + TypeScript + Tailwind CSS + shadcn/ui 스택을 사용합니다.

## 아키텍처 원칙
- **클린 아키텍처**: 도메인 → 애플리케이션 → 인프라 레이어 분리
- **컴포넌트 중심**: 재사용 가능한 UI 컴포넌트 우선 설계
- **타입 안전성**: TypeScript strict 모드, Zod 검증 필수
- **반응형 디자인**: 모바일 퍼스트, PWA 지원
- **성능 최적화**: 코드 스플리팅, 이미지 최적화, 캐싱

## 코딩 표준

### TypeScript
- `strict: true` 모드 사용
- 모든 함수에 TSDoc 주석 작성
- `any` 타입 사용 금지, `unknown` 사용
- 인터페이스는 `I` 접두사 없이 PascalCase
- 유틸리티 타입 적극 활용 (`Pick`, `Omit`, `Partial` 등)

### React/Next.js
- 함수형 컴포넌트 + Hooks 사용
- `'use client'` 지시어는 필요한 경우에만 사용
- Props는 인터페이스로 정의
- 커스텀 훅은 `use` 접두사 사용
- 컴포넌트는 PascalCase, 파일명은 kebab-case

### 스타일링
- Tailwind CSS 클래스 사용
- shadcn/ui 컴포넌트 우선 사용
- 커스텀 스타일은 `globals.css`에 정의
- 반응형: `sm:`, `md:`, `lg:`, `xl:` 브레이크포인트 사용

## 폴더 구조
```
/app
  /(auth)          # 인증 관련 페이지
  /admin           # 관리자 페이지
  /team            # 팀 운영 페이지
  /matches         # 경기 관련 페이지
  /players         # 선수 관리 페이지
  /stats           # 통계 페이지
  /matchmaking     # 매칭 페이지
  /community       # 커뮤니티 페이지
  /api             # API 라우트
/components
  /ui              # shadcn/ui 컴포넌트
  /forms           # 폼 컴포넌트
  /charts          # 차트 컴포넌트
  /layout          # 레이아웃 컴포넌트
/lib
  /utils           # 유틸리티 함수
  /hooks           # 커스텀 훅
  /validations     # Zod 스키마
  /constants       # 상수 정의
/types             # TypeScript 타입 정의
```

## 데이터 모델 가이드

### 핵심 엔티티
- `User`: 사용자 (역할 기반 권한)
- `Club`: 클럽/조직 (다팀 운영)
- `Team`: 팀 (ELO 레이팅, 선호 설정)
- `Player`: 선수 (포지션, 컨디션, 부상 기록)
- `Season`: 시즌 (리그/컵/친선)
- `Match`: 경기 (상태, 이벤트, 라인업)
- `MatchEvent`: 경기 이벤트 (골, 어시, 카드 등)
- `Venue`: 구장 (위치, 시설, 파트너)
- `Referee`: 심판 (레벨, 가용성, 파트너)

### 관계 설계
- Club 1:N Team
- Team 1:N Player
- Season 1:N Match
- Match 1:N MatchEvent
- Match N:1 Venue, N:1 Referee

## API 설계 원칙

### RESTful API
- `GET /api/teams` - 팀 목록
- `POST /api/teams` - 팀 생성
- `GET /api/teams/:id` - 팀 상세
- `PATCH /api/teams/:id` - 팀 수정
- `DELETE /api/teams/:id` - 팀 삭제

### 실시간 기능
- WebSocket 또는 Server-Sent Events 사용
- 경기 이벤트 실시간 업데이트
- 출석 체크 실시간 동기화

### 권한 체크
- 미들웨어에서 RBAC 검증
- 팀 경계(tenant) 체크 필수
- API 응답에 적절한 HTTP 상태 코드

## 컴포넌트 개발 가이드

### shadcn/ui 확장
```tsx
// 기존 컴포넌트 확장
import { Button } from '@/components/ui/button';

interface CustomButtonProps extends React.ComponentProps<typeof Button> {
  loading?: boolean;
}

export function CustomButton({ loading, children, ...props }: CustomButtonProps) {
  return (
    <Button disabled={loading} {...props}>
      {loading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
      {children}
    </Button>
  );
}
```

### 폼 컴포넌트
```tsx
// React Hook Form + Zod 사용
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const schema = z.object({
  name: z.string().min(1, '이름을 입력해주세요'),
  email: z.string().email('올바른 이메일을 입력해주세요'),
});

export function PlayerForm() {
  const form = useForm<z.infer<typeof schema>>({
    resolver: zodResolver(schema),
  });

  // ...
}
```

## 테스트 가이드

### 단위 테스트
- 모든 유틸리티 함수 테스트
- 컴포넌트 렌더링 테스트
- 커스텀 훅 테스트

### 통합 테스트
- API 엔드포인트 테스트
- 폼 제출 플로우 테스트
- 권한 체크 테스트

### E2E 테스트
- 주요 사용자 플로우 테스트
- 모바일 반응형 테스트
- PWA 기능 테스트

## 성능 최적화

### 이미지 최적화
```tsx
import Image from 'next/image';

<Image
  src="/player-photo.jpg"
  alt="선수 사진"
  width={200}
  height={200}
  priority={isAboveFold}
  placeholder="blur"
  blurDataURL="data:image/jpeg;base64,..."
/>
```

### 코드 스플리팅
```tsx
import dynamic from 'next/dynamic';

const MatchBoard = dynamic(() => import('@/components/MatchBoard'), {
  loading: () => <MatchBoardSkeleton />,
  ssr: false
});
```

### 캐싱 전략
- 정적 데이터: ISR (Incremental Static Regeneration)
- 동적 데이터: SWR 또는 TanStack Query
- 오프라인: Service Worker + IndexedDB

## PWA 개발

### 오프라인 지원
- 경기 기록 오프라인 저장
- 출석 체크 오프라인 가능
- 연결 복구 시 자동 동기화

### 푸시 알림
- 경기 일정 알림
- 출석 체크 리마인더
- 매칭 요청 알림

## 보안 가이드

### 인증/인가
- NextAuth.js 사용
- JWT 토큰 회전
- 세션 만료 관리

### 데이터 보호
- 개인정보 암호화
- API 요청 로깅
- 민감한 데이터 마스킹

### 입력 검증
- Zod 스키마 검증
- XSS 방지
- SQL 인젝션 방지

## 배포 가이드

### 환경 설정
- `.env.local` - 로컬 개발
- `.env.production` - 프로덕션
- Vercel 환경 변수 설정

### CI/CD
- GitHub Actions 워크플로우
- 자동 테스트 실행
- 프리뷰 배포
- 프로덕션 배포 승인

## 디버깅 가이드

### 개발 도구
- React Developer Tools
- Next.js DevTools
- Chrome DevTools
- Sentry 에러 추적

### 로깅
```tsx
// 개발 환경에서만 로깅
if (process.env.NODE_ENV === 'development') {
  console.log('Debug info:', data);
}
```

## 커밋 규칙

### Conventional Commits
- `feat:` 새로운 기능
- `fix:` 버그 수정
- `docs:` 문서 수정
- `style:` 코드 스타일 변경
- `refactor:` 리팩토링
- `test:` 테스트 추가/수정
- `chore:` 빌드/설정 변경

### 예시
```
feat: add player statistics dashboard
fix: resolve match event sync issue
docs: update API documentation
```

## 코드 리뷰 체크리스트

### 기능성
- [ ] 요구사항 충족
- [ ] 에러 처리 적절
- [ ] 사용자 경험 고려

### 코드 품질
- [ ] 타입 안전성
- [ ] 성능 최적화
- [ ] 재사용성
- [ ] 가독성

### 보안
- [ ] 권한 체크
- [ ] 입력 검증
- [ ] 민감한 데이터 보호

## 자주 사용하는 Cursor 프롬프트

### 컴포넌트 생성
```
이 스키마로 React 컴포넌트를 생성해주세요:
- shadcn/ui 컴포넌트 사용
- TypeScript + Tailwind CSS
- 반응형 디자인
- 접근성 고려
- 로딩/에러 상태 처리
```

### API 엔드포인트
```
이 엔드포인트를 구현해주세요:
- Next.js API Route
- Zod 검증
- 권한 체크
- 에러 처리
- Swagger 문서
```

### 테스트 작성
```
이 컴포넌트의 테스트를 작성해주세요:
- 렌더링 테스트
- 사용자 상호작용 테스트
- 에러 케이스 테스트
- 접근성 테스트
```

## 문제 해결 가이드

### 자주 발생하는 문제
1. **Hydration 에러**: `useEffect`로 클라이언트 전용 로직 처리
2. **타입 에러**: `as const` 또는 타입 단언 사용
3. **성능 이슈**: `React.memo`, `useMemo`, `useCallback` 활용
4. **빌드 에러**: `next.config.js` 설정 확인

### 디버깅 팁
- 브라우저 개발자 도구 활용
- Next.js 빌드 로그 확인
- TypeScript 컴파일러 에러 분석
- 네트워크 탭에서 API 요청 확인

---

이 가이드를 따라 개발하면 일관성 있고 유지보수 가능한 코드를 작성할 수 있습니다. 질문이 있으면 언제든 문의하세요!
